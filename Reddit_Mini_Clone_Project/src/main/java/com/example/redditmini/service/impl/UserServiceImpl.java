package com.example.redditmini.service.impl; import com.example.redditmini.model.User; import com.example.redditmini.repository.UserRepository; import com.example.redditmini.service.UserService; import org.springframework.security.crypto.password.PasswordEncoder; import org.springframework.stereotype.Service; import org.springframework.transaction.annotation.Transactional; import java.util.Optional; @Service @Transactional public class UserServiceImpl implements UserService { private final UserRepository repo; private final PasswordEncoder encoder; public UserServiceImpl(UserRepository repo, PasswordEncoder encoder){ this.repo=repo; this.encoder=encoder; } public User register(String username,String email,String rawPassword){ User u=new User(); u.setUsername(username); u.setEmail(email); u.setPasswordHash(encoder.encode(rawPassword)); u.setRoles("USER"); return repo.save(u);} public Optional<User> findByUsername(String username){ return repo.findByUsername(username);} }